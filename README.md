# AI旅行规划师 (AI Travel Planner)

基于Flutter Web的智能旅行规划应用，集成AI技术简化旅行规划过程。

## 项目概述

本项目是一个Web版的AI旅行规划工具，通过AI了解用户需求，自动生成详细的旅行路线和建议，并提供实时旅行辅助功能。系统采用现代化的技术栈，结合多种AI服务，为用户提供智能化的旅行规划体验。

## 🎯 核心功能

### ✅ 已实现功能

1. **用户认证系统**
   - 注册/登录功能
   - 不安全密码传输模式（开发测试用）
   - SRP安全认证协议（开发中）
   - JWT令牌管理

2. **行程管理**
   - 创建、编辑、删除行程
   - 行程列表展示
   - 行程详情页面
   - 活动管理（添加、编辑、删除活动）

3. **AI智能规划**
   - 基于OpenAI API的行程规划
   - 支持流式响应，实时显示生成过程
   - AI响应格式验证和重试机制
   - 支持GLM和DeepSeek双AI提供商

4. **语音识别集成**
   - 科大讯飞语音识别服务
   - 语音输入旅行需求
   - 实时语音识别状态显示

5. **API密钥管理**
   - 用户级API密钥配置 (开发中)
   - 多服务API密钥管理（OpenAI、高德地图、科大讯飞、GLM）
   - 加密存储和自动解密

6. **响应式UI设计**
   - 横屏和竖屏自适应布局
   - 现代化的Material Design界面
   - 流畅的动画和交互效果

### 🚧 开发中功能

1. **地图导航系统**
   - 高德地图集成（基础框架已搭建）
   - 地点搜索和标记功能
   - 路线规划和导航面板
   - 多交通方式支持（驾车、公交、步行、骑行）

2. **预算分析功能**
   - 基于AI的预算分析
   - 费用统计和优化建议
   - 预算与实际开销对比

3. **SRP安全认证**
   - 安全远程密码协议完整实现
   - 零知识证明认证机制
   - 相互身份验证

### 📋 TBD功能（未来规划）

1. **高级AI功能**
   - 基于GLM搜索API的智能搜索
   - 多轮对话优化行程规划
   - 实时旅行建议和调整

2. **社交功能**
   - 行程分享和协作编辑
   - 热门行程推荐
   - 用户评价和评分系统

3. **移动端优化**
   - PWA渐进式Web应用
   - 离线功能支持
   - 推送通知

4. **国际化支持**
   - 多语言界面
   - 多货币预算分析
   - 全球目的地支持

## 🛠️ 技术栈

### 前端技术
- **框架**: Flutter Web 3.0+
- **状态管理**: Riverpod
- **路由管理**: GoRouter
- **UI组件**: Material Design 3
- **HTTP客户端**: Dio
- **本地存储**: Shared Preferences

### 后端技术
- **框架**: Python + FastAPI
- **数据库**: SQLite (初期)
- **包管理**: uv
- **认证**: JWT + SRP协议
- **API文档**: OpenAPI/Swagger

### AI服务集成
- **大语言模型**: OpenAI API (默认DeepSeek-chat)
- **搜索服务**: 智谱GLM搜索API
- **语音识别**: 科大讯飞语音识别API
- **地图服务**: 高德地图API

## 🏗️ 项目架构

### 前端架构 (Flutter Web)
```
frontend/
├── lib/
│   ├── pages/              # 页面组件
│   │   ├── auth/          # 认证页面
│   │   └── trips/         # 行程管理页面
│   ├── providers/         # 状态管理
│   ├── services/          # API服务
│   ├── models/            # 数据模型
│   ├── components/        # 可复用组件
│   └── config/            # 应用配置
├── web/                   # Web配置
└── pubspec.yaml          # 依赖配置
```

### 后端架构 (FastAPI)
```
backend/
├── app/
│   ├── routers/           # API路由
│   ├── models/           # 数据模型
│   ├── schemas/          # Pydantic模型
│   ├── auth.py           # 认证逻辑
│   └── main.py           # 应用入口
├── pyproject.toml        # uv配置
└── .env.example          # 环境变量
```

## 🔐 安全特性

### 数据安全设计
- **用户认证**: 支持SRP协议，服务器不存储用户密码
- **API密钥**: 用户级密钥管理，前端加密存储
- **数据传输**: HTTPS加密传输
- **会话管理**: JWT令牌，支持自动刷新

### 隐私保护
- **数据所有权**: 用户完全控制自己的行程数据
- **选择性分享**: 用户可选择分享行程给其他用户
- **数据加密**: 敏感数据在传输和存储时加密

## 🚀 快速开始

### 环境要求
- Python 3.9+
- Flutter 3.0+ (Web支持)
- uv (Python包管理器)

### 后端启动
```bash
cd backend
uv run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 前端启动
```bash
cd frontend
flutter run -d chrome --debug
```

### 一键启动开发环境
```bash
./start_dev.sh
```

## ⚙️ 配置说明

### API密钥配置
**重要**: 所有API密钥与用户账户绑定，每个用户只能使用自己设置的API密钥。

用户可在账户设置界面配置以下API密钥：
- **OpenAI API Key**: 用于AI行程规划
- **高德地图API Key**: 用于地图和导航服务
- **科大讯飞语音识别API Key**: 用于语音输入功能
- **智谱GLM搜索API Key**: 用于智能搜索功能

API密钥为空时相关服务不可用，但不影响其他服务的使用。

## 🎨 项目特点

### 1. 智能化程度高
- **AI驱动**: 基于大语言模型的智能行程规划
- **多模态输入**: 支持文字和语音两种输入方式
- **实时响应**: 流式API提供实时生成体验
- **智能验证**: AI响应格式自动验证和重试

### 2. 用户体验优秀
- **响应式设计**: 完美适配横屏和竖屏显示
- **直观操作**: 拖拽调整、语音输入等便捷操作
- **实时反馈**: 操作状态实时提示和进度显示
- **错误处理**: 完善的错误提示和恢复机制

### 3. 技术架构先进
- **现代化技术栈**: Flutter Web + FastAPI组合
- **模块化设计**: 清晰的代码结构和职责分离
- **状态管理**: Riverpod提供可预测的状态管理
- **类型安全**: 强类型语言确保代码质量

### 4. 扩展性强
- **插件化架构**: 易于添加新的AI服务
- **配置灵活**: 用户级API密钥管理
- **国际化就绪**: 架构支持多语言扩展
- **移动端兼容**: 为未来移动端开发做好准备

## 🔮 未来展望

### 短期目标 (1-3个月)
- [ ] 完成地图导航功能完整实现
- [ ] 实现预算分析功能
- [ ] 完善SRP安全认证
- [ ] 优化AI规划算法

### 中期目标 (3-6个月)
- [ ] 集成GLM搜索API到AI规划流程
- [ ] 实现行程分享和协作功能
- [ ] 开发移动端PWA应用
- [ ] 添加多语言支持

### 长期愿景 (6-12个月)
- [ ] 构建旅行社交平台
- [ ] 开发AI旅行助手聊天机器人
- [ ] 实现AR/VR旅行预览功能
- [ ] 建立旅行大数据分析平台

## 🤝 贡献指南

我们欢迎社区贡献！请参考以下步骤：

1. Fork 本项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 📞 联系我们

如有问题或建议，请通过以下方式联系我们：
- 项目Issues: [GitHub Issues](https://github.com/your-repo/issues)
- 邮箱: contact@example.com

---

**AI旅行规划师** - 让每一次旅行都成为完美的体验 ✈️